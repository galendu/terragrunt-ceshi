// terraform {
//   source = "../../../modules/ecs"
// }

// locals {
  // # 使用 get_workspace() 获取当前工作空间
  // 
//   project = "terragrunt_demo_dx"
//   auth = "dx"
//   complete="${local.project}-${local.auth}"
// }

// inputs = {
//   count                               = 1
//   image_id                            = "ubuntu_24_04_x64_20G_alibase_20240923.vhd"
//   instance_type                       = "ecs.t5-lc1m2.small"
//   security_groups                     = dependency.sg.outputs.sg_ids
//   vswitch_id                          = dependency.vpc.outputs.vswitch_id
//   instance_name                       = "${local.complete}-1"

//   resource_group_id                   = "" //资源组
//   description                         = "${local.complete} description"
//   internet_charge_type                = "PayByTraffic" //按量付费 The internet charge type of instance. Choices are 'PayByTraffic' and 'PayByBandwidth'
//   // password                            = var.password
//   system_disk_category                = "cloud_essd"
//   system_disk_size                    = 50
//   system_disk_name                    = "${local.complete}-disk-1"


//   internet_max_bandwidth_out    = 50
  
//   // user_data创建后,执行命令
//   user_data                     = <<EOF
//   apt-get update
//   apt-get install apache2 -y
//     apt-get install -y ca-certificates curl gnupg lsb-release
//   curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
//   echo \
//     "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
//     $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
//   sudo apt update
//   sudo apt-get install -y docker-ce docker-ce-cli containerd.io
//   sudo systemctl start docker
//   sudo systemctl enable docker
//   docker -v
//   EOF
//   key_name                      = "my-ecs-cluster-key" 
//   deletion_protection           = false //禁用删除保护,禁止删除关闭

//   tags = {
//     Created     = "Terraform"
//     Environment = "test"
//   }
//   volume_tags = ""
// }

// dependency "vpc" {
//   config_path = "../vpc"

//   mock_outputs = {
//     vpc_id = "vpc-123456"
//   }
// }

// dependency "sg" {
//   config_path = "../sg"

//   mock_outputs = {
//     sg_id = "sg-123456"
//   }
// }